{"ast":null,"code":"import _slicedToArray from\"/Users/sebastiancevallos/Desktop/School/UCLA/Winter 2023/CS 35L/cs35l_project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import ApiCalendar from'react-google-calendar-api';// https://developers.google.com/calendar/api/v3/reference/events/list\n// https://github.com/google/google-api-javascript-client/blob/master/docs/reference.md#----gapiclientrequestargs--\n// https://github.com/Nouran96/full-calendar-google-calendar/blob/main/src/components/GoogleCalendar.js\n// https://github.com/Kubessandra/react-google-calendar-api/blob/master/exemple-app/src/components/TestDemo.jsx\n// \nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CalendarAPI=function CalendarAPI(){var config={\"clientId\":\"832026479166-3i3nl2i2nngrpjer3rjoi85a18v4ufc0.apps.googleusercontent.com\",\"apiKey\":\"AIzaSyD-rsdUh4BKKlvbkYvjJRJSVV1T-KiBXQE\",\"scope\":\"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar\",\"discoveryDocs\":[\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"]};var _useState=useState(null),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),calendarNames=_useState4[0],setCalendarNames=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),calendarIDs=_useState6[0],setCalendarIDs=_useState6[1];var formatEvents=function formatEvents(list){return list.map(function(item){return{title:item.summary,start:item.start.dateTime||item.start.date,end:item.end.dateTime||item.end.date};});};useEffect(function(){var script=document.createElement(\"script\");script.async=true;script.defer=true;script.src=\"https://apis.google.com/js/api.js\";document.body.appendChild(script);},[]);var listUpcomingEvents=function listUpcomingEvents(calendarID,calendarName){var minDate=new Date();var maxDate=new Date();minDate.setDate(minDate.getDate());maxDate.setDate(maxDate.getDate()+20);window.gapi.client.calendar.events.list({calendarId:calendarID,timeMin:minDate.toISOString(),timeMax:maxDate.toISOString(),showDeleted:true,singleEvents:true,maxResults:10//orderBy: \"startTime\",\n}).then(function(response){var events=response.result.items;//.reverse();\nconsole.log(\"--------\".concat(calendarName,\"-------\"));console.log(\"EVENTS:\",events);events.forEach(function(event){console.log(event.summary,event.start.dateTime.slice(0,10));console.log(\"\".concat(event.start.dateTime.slice(12)));});if(events.length>0){setEvents(formatEvents(events));}});};var apiCalendar=new ApiCalendar(config);var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),promise=_useState8[0],setPromise=_useState8[1];var authCal=function authCal(){apiCalendar.handleAuthClick();setPromise(true);};var showCalendars=function showCalendars(){var calendarIDs=[];var calendarNames=[];apiCalendar.listCalendars().then(function(_ref){var result=_ref.result;console.log(result.items);result.items.forEach(function(event){var info=\"Summary: \".concat(event.summary);if(event.summaryOverride){info+=\", Override: \".concat(event.summaryOverride);}console.log(info);console.log(\"ID: \".concat(event.id));console.log();calendarIDs.push(event.id);calendarNames.push(event.summaryOverride?event.summaryOverride:event.summary);});});setCalendarIDs(calendarIDs);setCalendarNames(calendarNames);};var showEvents=function showEvents(){calendarIDs.forEach(function(id,i){listUpcomingEvents(id,calendarNames[i]);});};var showPromise=function showPromise(){console.log(promise);};var test=function test(){console.log(\"CALLED\");console.log(process.env.API_KEY);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Home\"}),/*#__PURE__*/_jsx(\"button\",{onClick:authCal,children:\"Authenticate Calendar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:showPromise,children:\"Show promise\"}),/*#__PURE__*/_jsx(\"button\",{onClick:showEvents,children:\"Show events\"}),/*#__PURE__*/_jsx(\"button\",{onClick:showCalendars,children:\"Show calendars\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Auth promise: \",promise]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:test,children:\"Print env content\"})]});};export default CalendarAPI;","map":{"version":3,"names":["React","useState","useEffect","ApiCalendar","CalendarAPI","config","events","setEvents","calendarNames","setCalendarNames","calendarIDs","setCalendarIDs","formatEvents","list","map","item","title","summary","start","dateTime","date","end","script","document","createElement","async","defer","src","body","appendChild","listUpcomingEvents","calendarID","calendarName","minDate","Date","maxDate","setDate","getDate","window","gapi","client","calendar","calendarId","timeMin","toISOString","timeMax","showDeleted","singleEvents","maxResults","then","response","result","items","console","log","forEach","event","slice","length","apiCalendar","promise","setPromise","authCal","handleAuthClick","showCalendars","listCalendars","info","summaryOverride","id","push","showEvents","i","showPromise","test","process","env","API_KEY"],"sources":["/Users/sebastiancevallos/Desktop/School/UCLA/Winter 2023/CS 35L/cs35l_project/client/src/pages/CalendarAPI.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ApiCalendar from 'react-google-calendar-api';\n\n// https://developers.google.com/calendar/api/v3/reference/events/list\n\n// https://github.com/google/google-api-javascript-client/blob/master/docs/reference.md#----gapiclientrequestargs--\n\n// https://github.com/Nouran96/full-calendar-google-calendar/blob/main/src/components/GoogleCalendar.js\n\n// https://github.com/Kubessandra/react-google-calendar-api/blob/master/exemple-app/src/components/TestDemo.jsx\n\n// \n\nconst CalendarAPI = () => {\n\n    const config = {\n        \"clientId\": \"832026479166-3i3nl2i2nngrpjer3rjoi85a18v4ufc0.apps.googleusercontent.com\",\n        \"apiKey\": \"AIzaSyD-rsdUh4BKKlvbkYvjJRJSVV1T-KiBXQE\",\n        \"scope\": \"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar\",\n        \"discoveryDocs\": [\n          \"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"\n        ]\n    }\n\n    const [events, setEvents] = useState(null);\n\n    const [calendarNames, setCalendarNames] = useState(null);\n    const [calendarIDs, setCalendarIDs] = useState(null);\n\n    const formatEvents = (list) => {\n        return list.map((item) => ({\n          title: item.summary,\n          start: item.start.dateTime || item.start.date,\n          end: item.end.dateTime || item.end.date,\n        }));\n      };\n\n    useEffect(() => {\n        const script = document.createElement(\"script\");\n        script.async = true;\n        script.defer = true;\n        script.src = \"https://apis.google.com/js/api.js\";\n    \n        document.body.appendChild(script);\n    \n      }, []);\n\n\n      const listUpcomingEvents = (calendarID, calendarName) => {\n\n        let minDate = new Date();\n        let maxDate = new Date();\n\n        minDate.setDate(minDate.getDate());\n        maxDate.setDate(maxDate.getDate() + 20);\n\n        window.gapi.client.calendar.events\n          .list({\n            calendarId: calendarID,\n            timeMin: minDate.toISOString(),\n            timeMax: maxDate.toISOString(),\n            showDeleted: true,\n            singleEvents: true,\n            maxResults: 10,\n            //orderBy: \"startTime\",\n          })\n          .then(function (response) {\n            var events = response.result.items;//.reverse();\n    \n            console.log(`--------${calendarName}-------`);\n            console.log(\"EVENTS:\", events);\n            \n            events.forEach( (event) => {\n                console.log(event.summary, event.start.dateTime.slice(0,10));\n                console.log(`${event.start.dateTime.slice(12,)}`)\n            })\n    \n            if (events.length > 0) {\n              setEvents(formatEvents(events));\n            }\n          });\n      };\n    \n    const apiCalendar = new ApiCalendar(config)\n\n    const [promise, setPromise] = useState(0);\n\n    const authCal = () => {\n        apiCalendar.handleAuthClick();\n        setPromise(true);\n    }\n\n    const showCalendars = () => {\n        let calendarIDs = [];\n        let calendarNames = [];\n\n        apiCalendar.listCalendars().then(({ result }) => {\n            console.log(result.items);\n            result.items.forEach((event) => {\n                let info = `Summary: ${event.summary}`;\n                if (event.summaryOverride) {\n                    info += `, Override: ${event.summaryOverride}`;\n                }\n                console.log(info);\n                console.log(`ID: ${event.id}`)\n                console.log()\n                calendarIDs.push(event.id);\n                calendarNames.push(event.summaryOverride ? event.summaryOverride : event.summary);\n            })\n        });\n        setCalendarIDs(calendarIDs);\n        setCalendarNames(calendarNames);\n    }\n\n    const showEvents = () => {\n        calendarIDs.forEach( (id, i) => {\n            listUpcomingEvents(id, calendarNames[i]);\n        })\n    }\n\n    const showPromise = () => {\n        console.log(promise);\n    }\n\n    const test = () => {\n      console.log(\"CALLED\")\n      console.log(process.env.API_KEY)\n    }\n\n    return (\n        <React.Fragment>\n            <a href=\"/\">Home</a>\n\n            <button onClick={authCal}>Authenticate Calendar</button>\n\n            <button onClick={showPromise}>Show promise</button>\n\n            <button onClick={showEvents}>Show events</button>\n\n            <button onClick={showCalendars}>Show calendars</button>\n\n            <p>Auth promise: {promise}</p>\n\n            <br />\n\n            <button onClick={test}>Print env content</button>\n\n        </React.Fragment>\n    );\n}\n\nexport default CalendarAPI"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}